<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_2.dtd'>
<nta>
	<declaration>
const int N=25;
broadcast chan busy;
const int macMaxCSMABackoffs = 4;
const int UnitBackoff = 20;
const int CCA_duration = 8;
const int CCA = 8;
const int aTurnaroundTime = 12;
const int TurnAround = 12;
const int ACK_time = 88;
const int ACK_Time = 88;
const int ACK = 88;
const int MaxFrameRetries = 3;
const int macMinBE = 3;
const int MaxBE = 5;
const int MaxNB = 5;
const int FrameLength = 35*8;
const int MaxWakingDelay=1000;
const int MinLIFS = 40;
const bool is_discrete_waiting = false;
const bool acknowledgment_supported = true;
const bool recover_from_failures = false;
const int wait_after_failure = 0;</declaration><template>
<name x="5" y="5">Process0</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id0" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id1" x="-2560" y="-200">
<urgent/>
</location>
<location id="id2" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id3" x="-1928" y="-200">
<urgent/>
</location>
<location id="id4" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id5" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id6" x="-2560" y="-288">
<urgent/>
</location>
<location id="id7" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id8" x="-2336" y="-40">
<urgent/>
</location>
<location id="id9" x="-2264" y="-360">
<urgent/>
</location>
<location id="id10" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id11" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id12" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id13" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id14" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id15" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id16" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id17" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id4"/>
<transition>
<source ref="id0"/>
<target ref="id5"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id1"/>
<target ref="id2"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id1"/>
<target ref="id6"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id4"/>
<target ref="id6"/>
</transition>
<transition>
<source ref="id5"/>
<target ref="id1"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id6"/>
<target ref="id17"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id15"/>
<target ref="id15"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id11"/>
<target ref="id8"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id9"/>
<target ref="id2"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id9"/>
<target ref="id17"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id11"/>
<target ref="id11"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id3"/>
<target ref="id12"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id10"/>
<target ref="id0"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id3"/>
<target ref="id10"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id13"/>
<target ref="id13"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id8"/>
<target ref="id7"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id8"/>
<target ref="id5"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id12"/>
<target ref="id11"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id13"/>
<target ref="id3"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id14"/>
<target ref="id13"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id15"/>
<target ref="id14"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id15"/>
<target ref="id9"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id16"/>
<target ref="id15"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id17"/>
<target ref="id16"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process1</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id18" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id19" x="-2560" y="-200">
<urgent/>
</location>
<location id="id20" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id21" x="-1928" y="-200">
<urgent/>
</location>
<location id="id22" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id23" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id24" x="-2560" y="-288">
<urgent/>
</location>
<location id="id25" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id26" x="-2336" y="-40">
<urgent/>
</location>
<location id="id27" x="-2264" y="-360">
<urgent/>
</location>
<location id="id28" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id29" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id30" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id31" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id32" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id33" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id34" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id35" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id22"/>
<transition>
<source ref="id18"/>
<target ref="id23"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id19"/>
<target ref="id20"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id19"/>
<target ref="id24"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id22"/>
<target ref="id24"/>
</transition>
<transition>
<source ref="id23"/>
<target ref="id19"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id24"/>
<target ref="id35"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id33"/>
<target ref="id33"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id29"/>
<target ref="id26"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id27"/>
<target ref="id20"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id27"/>
<target ref="id35"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id29"/>
<target ref="id29"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id21"/>
<target ref="id30"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id28"/>
<target ref="id18"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id21"/>
<target ref="id28"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id31"/>
<target ref="id31"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id26"/>
<target ref="id25"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id26"/>
<target ref="id23"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id30"/>
<target ref="id29"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id31"/>
<target ref="id21"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id32"/>
<target ref="id31"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id33"/>
<target ref="id32"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id33"/>
<target ref="id27"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id34"/>
<target ref="id33"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id35"/>
<target ref="id34"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process2</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id36" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id37" x="-2560" y="-200">
<urgent/>
</location>
<location id="id38" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id39" x="-1928" y="-200">
<urgent/>
</location>
<location id="id40" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id41" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id42" x="-2560" y="-288">
<urgent/>
</location>
<location id="id43" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id44" x="-2336" y="-40">
<urgent/>
</location>
<location id="id45" x="-2264" y="-360">
<urgent/>
</location>
<location id="id46" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id47" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id48" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id49" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id50" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id51" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id52" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id53" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id40"/>
<transition>
<source ref="id36"/>
<target ref="id41"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id37"/>
<target ref="id38"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id37"/>
<target ref="id42"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id40"/>
<target ref="id42"/>
</transition>
<transition>
<source ref="id41"/>
<target ref="id37"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id42"/>
<target ref="id53"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id51"/>
<target ref="id51"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id47"/>
<target ref="id44"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id45"/>
<target ref="id38"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id45"/>
<target ref="id53"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id47"/>
<target ref="id47"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id39"/>
<target ref="id48"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id46"/>
<target ref="id36"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id39"/>
<target ref="id46"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id49"/>
<target ref="id49"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id44"/>
<target ref="id43"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id44"/>
<target ref="id41"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id48"/>
<target ref="id47"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id49"/>
<target ref="id39"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id50"/>
<target ref="id49"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id51"/>
<target ref="id50"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id51"/>
<target ref="id45"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id52"/>
<target ref="id51"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id53"/>
<target ref="id52"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process3</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id54" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id55" x="-2560" y="-200">
<urgent/>
</location>
<location id="id56" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id57" x="-1928" y="-200">
<urgent/>
</location>
<location id="id58" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id59" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id60" x="-2560" y="-288">
<urgent/>
</location>
<location id="id61" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id62" x="-2336" y="-40">
<urgent/>
</location>
<location id="id63" x="-2264" y="-360">
<urgent/>
</location>
<location id="id64" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id65" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id66" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id67" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id68" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id69" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id70" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id71" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id58"/>
<transition>
<source ref="id54"/>
<target ref="id59"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id55"/>
<target ref="id56"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id55"/>
<target ref="id60"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id58"/>
<target ref="id60"/>
</transition>
<transition>
<source ref="id59"/>
<target ref="id55"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id60"/>
<target ref="id71"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id69"/>
<target ref="id69"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id65"/>
<target ref="id62"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id63"/>
<target ref="id56"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id63"/>
<target ref="id71"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id65"/>
<target ref="id65"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id57"/>
<target ref="id66"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id64"/>
<target ref="id54"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id57"/>
<target ref="id64"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id67"/>
<target ref="id67"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id62"/>
<target ref="id61"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id62"/>
<target ref="id59"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id66"/>
<target ref="id65"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id67"/>
<target ref="id57"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id68"/>
<target ref="id67"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id69"/>
<target ref="id68"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id69"/>
<target ref="id63"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id70"/>
<target ref="id69"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id71"/>
<target ref="id70"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process4</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id72" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id73" x="-2560" y="-200">
<urgent/>
</location>
<location id="id74" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id75" x="-1928" y="-200">
<urgent/>
</location>
<location id="id76" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id77" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id78" x="-2560" y="-288">
<urgent/>
</location>
<location id="id79" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id80" x="-2336" y="-40">
<urgent/>
</location>
<location id="id81" x="-2264" y="-360">
<urgent/>
</location>
<location id="id82" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id83" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id84" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id85" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id86" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id87" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id88" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id89" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id76"/>
<transition>
<source ref="id72"/>
<target ref="id77"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id73"/>
<target ref="id74"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id73"/>
<target ref="id78"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id76"/>
<target ref="id78"/>
</transition>
<transition>
<source ref="id77"/>
<target ref="id73"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id78"/>
<target ref="id89"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id87"/>
<target ref="id87"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id83"/>
<target ref="id80"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id81"/>
<target ref="id74"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id81"/>
<target ref="id89"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id83"/>
<target ref="id83"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id75"/>
<target ref="id84"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id82"/>
<target ref="id72"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id75"/>
<target ref="id82"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id85"/>
<target ref="id85"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id80"/>
<target ref="id79"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id80"/>
<target ref="id77"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id84"/>
<target ref="id83"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id85"/>
<target ref="id75"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id86"/>
<target ref="id85"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id87"/>
<target ref="id86"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id87"/>
<target ref="id81"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id88"/>
<target ref="id87"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id89"/>
<target ref="id88"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process5</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id90" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id91" x="-2560" y="-200">
<urgent/>
</location>
<location id="id92" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id93" x="-1928" y="-200">
<urgent/>
</location>
<location id="id94" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id95" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id96" x="-2560" y="-288">
<urgent/>
</location>
<location id="id97" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id98" x="-2336" y="-40">
<urgent/>
</location>
<location id="id99" x="-2264" y="-360">
<urgent/>
</location>
<location id="id100" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id101" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id102" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id103" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id104" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id105" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id106" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id107" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id94"/>
<transition>
<source ref="id90"/>
<target ref="id95"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id91"/>
<target ref="id92"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id91"/>
<target ref="id96"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id94"/>
<target ref="id96"/>
</transition>
<transition>
<source ref="id95"/>
<target ref="id91"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id96"/>
<target ref="id107"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id105"/>
<target ref="id105"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id101"/>
<target ref="id98"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id99"/>
<target ref="id92"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id99"/>
<target ref="id107"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id101"/>
<target ref="id101"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id93"/>
<target ref="id102"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id100"/>
<target ref="id90"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id93"/>
<target ref="id100"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id103"/>
<target ref="id103"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id98"/>
<target ref="id97"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id98"/>
<target ref="id95"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id102"/>
<target ref="id101"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id103"/>
<target ref="id93"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id104"/>
<target ref="id103"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id105"/>
<target ref="id104"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id105"/>
<target ref="id99"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id106"/>
<target ref="id105"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id107"/>
<target ref="id106"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process6</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id108" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id109" x="-2560" y="-200">
<urgent/>
</location>
<location id="id110" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id111" x="-1928" y="-200">
<urgent/>
</location>
<location id="id112" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id113" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id114" x="-2560" y="-288">
<urgent/>
</location>
<location id="id115" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id116" x="-2336" y="-40">
<urgent/>
</location>
<location id="id117" x="-2264" y="-360">
<urgent/>
</location>
<location id="id118" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id119" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id120" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id121" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id122" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id123" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id124" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id125" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id112"/>
<transition>
<source ref="id108"/>
<target ref="id113"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id109"/>
<target ref="id110"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id109"/>
<target ref="id114"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id112"/>
<target ref="id114"/>
</transition>
<transition>
<source ref="id113"/>
<target ref="id109"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id114"/>
<target ref="id125"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id123"/>
<target ref="id123"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id119"/>
<target ref="id116"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id117"/>
<target ref="id110"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id117"/>
<target ref="id125"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id119"/>
<target ref="id119"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id111"/>
<target ref="id120"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id118"/>
<target ref="id108"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id111"/>
<target ref="id118"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id121"/>
<target ref="id121"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id116"/>
<target ref="id115"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id116"/>
<target ref="id113"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id120"/>
<target ref="id119"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id121"/>
<target ref="id111"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id122"/>
<target ref="id121"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id123"/>
<target ref="id122"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id123"/>
<target ref="id117"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id124"/>
<target ref="id123"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id125"/>
<target ref="id124"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process7</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id126" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id127" x="-2560" y="-200">
<urgent/>
</location>
<location id="id128" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id129" x="-1928" y="-200">
<urgent/>
</location>
<location id="id130" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id131" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id132" x="-2560" y="-288">
<urgent/>
</location>
<location id="id133" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id134" x="-2336" y="-40">
<urgent/>
</location>
<location id="id135" x="-2264" y="-360">
<urgent/>
</location>
<location id="id136" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id137" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id138" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id139" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id140" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id141" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id142" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id143" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id130"/>
<transition>
<source ref="id126"/>
<target ref="id131"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id127"/>
<target ref="id128"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id127"/>
<target ref="id132"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id130"/>
<target ref="id132"/>
</transition>
<transition>
<source ref="id131"/>
<target ref="id127"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id132"/>
<target ref="id143"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id141"/>
<target ref="id141"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id137"/>
<target ref="id134"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id135"/>
<target ref="id128"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id135"/>
<target ref="id143"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id137"/>
<target ref="id137"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id129"/>
<target ref="id138"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id136"/>
<target ref="id126"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id129"/>
<target ref="id136"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id139"/>
<target ref="id139"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id134"/>
<target ref="id133"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id134"/>
<target ref="id131"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id138"/>
<target ref="id137"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id139"/>
<target ref="id129"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id140"/>
<target ref="id139"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id141"/>
<target ref="id140"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id141"/>
<target ref="id135"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id142"/>
<target ref="id141"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id143"/>
<target ref="id142"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process8</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id144" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id145" x="-2560" y="-200">
<urgent/>
</location>
<location id="id146" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id147" x="-1928" y="-200">
<urgent/>
</location>
<location id="id148" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id149" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id150" x="-2560" y="-288">
<urgent/>
</location>
<location id="id151" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id152" x="-2336" y="-40">
<urgent/>
</location>
<location id="id153" x="-2264" y="-360">
<urgent/>
</location>
<location id="id154" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id155" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id156" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id157" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id158" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id159" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id160" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id161" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id148"/>
<transition>
<source ref="id144"/>
<target ref="id149"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id145"/>
<target ref="id146"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id145"/>
<target ref="id150"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id148"/>
<target ref="id150"/>
</transition>
<transition>
<source ref="id149"/>
<target ref="id145"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id150"/>
<target ref="id161"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id159"/>
<target ref="id159"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id155"/>
<target ref="id152"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id153"/>
<target ref="id146"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id153"/>
<target ref="id161"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id155"/>
<target ref="id155"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id147"/>
<target ref="id156"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id154"/>
<target ref="id144"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id147"/>
<target ref="id154"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id157"/>
<target ref="id157"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id152"/>
<target ref="id151"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id152"/>
<target ref="id149"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id156"/>
<target ref="id155"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id157"/>
<target ref="id147"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id158"/>
<target ref="id157"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id159"/>
<target ref="id158"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id159"/>
<target ref="id153"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id160"/>
<target ref="id159"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id161"/>
<target ref="id160"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process9</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id162" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id163" x="-2560" y="-200">
<urgent/>
</location>
<location id="id164" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id165" x="-1928" y="-200">
<urgent/>
</location>
<location id="id166" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id167" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id168" x="-2560" y="-288">
<urgent/>
</location>
<location id="id169" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id170" x="-2336" y="-40">
<urgent/>
</location>
<location id="id171" x="-2264" y="-360">
<urgent/>
</location>
<location id="id172" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id173" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id174" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id175" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id176" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id177" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id178" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id179" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id166"/>
<transition>
<source ref="id162"/>
<target ref="id167"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id163"/>
<target ref="id164"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id163"/>
<target ref="id168"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id166"/>
<target ref="id168"/>
</transition>
<transition>
<source ref="id167"/>
<target ref="id163"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id168"/>
<target ref="id179"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id177"/>
<target ref="id177"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id173"/>
<target ref="id170"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id171"/>
<target ref="id164"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id171"/>
<target ref="id179"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id173"/>
<target ref="id173"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id165"/>
<target ref="id174"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id172"/>
<target ref="id162"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id165"/>
<target ref="id172"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id175"/>
<target ref="id175"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id170"/>
<target ref="id169"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id170"/>
<target ref="id167"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id174"/>
<target ref="id173"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id175"/>
<target ref="id165"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id176"/>
<target ref="id175"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id177"/>
<target ref="id176"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id177"/>
<target ref="id171"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id178"/>
<target ref="id177"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id179"/>
<target ref="id178"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process10</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id180" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id181" x="-2560" y="-200">
<urgent/>
</location>
<location id="id182" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id183" x="-1928" y="-200">
<urgent/>
</location>
<location id="id184" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id185" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id186" x="-2560" y="-288">
<urgent/>
</location>
<location id="id187" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id188" x="-2336" y="-40">
<urgent/>
</location>
<location id="id189" x="-2264" y="-360">
<urgent/>
</location>
<location id="id190" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id191" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id192" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id193" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id194" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id195" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id196" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id197" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id184"/>
<transition>
<source ref="id180"/>
<target ref="id185"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id181"/>
<target ref="id182"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id181"/>
<target ref="id186"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id184"/>
<target ref="id186"/>
</transition>
<transition>
<source ref="id185"/>
<target ref="id181"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id186"/>
<target ref="id197"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id195"/>
<target ref="id195"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id191"/>
<target ref="id188"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id189"/>
<target ref="id182"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id189"/>
<target ref="id197"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id191"/>
<target ref="id191"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id183"/>
<target ref="id192"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id190"/>
<target ref="id180"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id183"/>
<target ref="id190"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id193"/>
<target ref="id193"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id188"/>
<target ref="id187"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id188"/>
<target ref="id185"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id192"/>
<target ref="id191"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id193"/>
<target ref="id183"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id194"/>
<target ref="id193"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id195"/>
<target ref="id194"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id195"/>
<target ref="id189"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id196"/>
<target ref="id195"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id197"/>
<target ref="id196"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process11</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id198" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id199" x="-2560" y="-200">
<urgent/>
</location>
<location id="id200" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id201" x="-1928" y="-200">
<urgent/>
</location>
<location id="id202" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id203" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id204" x="-2560" y="-288">
<urgent/>
</location>
<location id="id205" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id206" x="-2336" y="-40">
<urgent/>
</location>
<location id="id207" x="-2264" y="-360">
<urgent/>
</location>
<location id="id208" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id209" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id210" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id211" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id212" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id213" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id214" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id215" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id202"/>
<transition>
<source ref="id198"/>
<target ref="id203"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id199"/>
<target ref="id200"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id199"/>
<target ref="id204"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id202"/>
<target ref="id204"/>
</transition>
<transition>
<source ref="id203"/>
<target ref="id199"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id204"/>
<target ref="id215"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id213"/>
<target ref="id213"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id209"/>
<target ref="id206"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id207"/>
<target ref="id200"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id207"/>
<target ref="id215"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id209"/>
<target ref="id209"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id201"/>
<target ref="id210"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id208"/>
<target ref="id198"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id201"/>
<target ref="id208"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id211"/>
<target ref="id211"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id206"/>
<target ref="id205"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id206"/>
<target ref="id203"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id210"/>
<target ref="id209"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id211"/>
<target ref="id201"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id212"/>
<target ref="id211"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id213"/>
<target ref="id212"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id213"/>
<target ref="id207"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id214"/>
<target ref="id213"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id215"/>
<target ref="id214"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process12</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id216" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id217" x="-2560" y="-200">
<urgent/>
</location>
<location id="id218" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id219" x="-1928" y="-200">
<urgent/>
</location>
<location id="id220" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id221" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id222" x="-2560" y="-288">
<urgent/>
</location>
<location id="id223" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id224" x="-2336" y="-40">
<urgent/>
</location>
<location id="id225" x="-2264" y="-360">
<urgent/>
</location>
<location id="id226" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id227" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id228" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id229" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id230" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id231" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id232" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id233" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id220"/>
<transition>
<source ref="id216"/>
<target ref="id221"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id217"/>
<target ref="id218"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id217"/>
<target ref="id222"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id220"/>
<target ref="id222"/>
</transition>
<transition>
<source ref="id221"/>
<target ref="id217"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id222"/>
<target ref="id233"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id231"/>
<target ref="id231"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id227"/>
<target ref="id224"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id225"/>
<target ref="id218"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id225"/>
<target ref="id233"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id227"/>
<target ref="id227"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id219"/>
<target ref="id228"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id226"/>
<target ref="id216"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id219"/>
<target ref="id226"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id229"/>
<target ref="id229"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id224"/>
<target ref="id223"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id224"/>
<target ref="id221"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id228"/>
<target ref="id227"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id229"/>
<target ref="id219"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id230"/>
<target ref="id229"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id231"/>
<target ref="id230"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id231"/>
<target ref="id225"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id232"/>
<target ref="id231"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id233"/>
<target ref="id232"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process13</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id234" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id235" x="-2560" y="-200">
<urgent/>
</location>
<location id="id236" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id237" x="-1928" y="-200">
<urgent/>
</location>
<location id="id238" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id239" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id240" x="-2560" y="-288">
<urgent/>
</location>
<location id="id241" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id242" x="-2336" y="-40">
<urgent/>
</location>
<location id="id243" x="-2264" y="-360">
<urgent/>
</location>
<location id="id244" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id245" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id246" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id247" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id248" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id249" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id250" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id251" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id238"/>
<transition>
<source ref="id234"/>
<target ref="id239"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id235"/>
<target ref="id236"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id235"/>
<target ref="id240"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id238"/>
<target ref="id240"/>
</transition>
<transition>
<source ref="id239"/>
<target ref="id235"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id240"/>
<target ref="id251"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id249"/>
<target ref="id249"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id245"/>
<target ref="id242"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id243"/>
<target ref="id236"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id243"/>
<target ref="id251"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id245"/>
<target ref="id245"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id237"/>
<target ref="id246"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id244"/>
<target ref="id234"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id237"/>
<target ref="id244"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id247"/>
<target ref="id247"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id242"/>
<target ref="id241"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id242"/>
<target ref="id239"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id246"/>
<target ref="id245"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id247"/>
<target ref="id237"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id248"/>
<target ref="id247"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id249"/>
<target ref="id248"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id249"/>
<target ref="id243"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id250"/>
<target ref="id249"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id251"/>
<target ref="id250"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process14</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id252" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id253" x="-2560" y="-200">
<urgent/>
</location>
<location id="id254" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id255" x="-1928" y="-200">
<urgent/>
</location>
<location id="id256" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id257" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id258" x="-2560" y="-288">
<urgent/>
</location>
<location id="id259" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id260" x="-2336" y="-40">
<urgent/>
</location>
<location id="id261" x="-2264" y="-360">
<urgent/>
</location>
<location id="id262" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id263" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id264" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id265" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id266" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id267" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id268" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id269" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id256"/>
<transition>
<source ref="id252"/>
<target ref="id257"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id253"/>
<target ref="id254"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id253"/>
<target ref="id258"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id256"/>
<target ref="id258"/>
</transition>
<transition>
<source ref="id257"/>
<target ref="id253"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id258"/>
<target ref="id269"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id267"/>
<target ref="id267"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id263"/>
<target ref="id260"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id261"/>
<target ref="id254"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id261"/>
<target ref="id269"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id263"/>
<target ref="id263"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id255"/>
<target ref="id264"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id262"/>
<target ref="id252"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id255"/>
<target ref="id262"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id265"/>
<target ref="id265"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id260"/>
<target ref="id259"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id260"/>
<target ref="id257"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id264"/>
<target ref="id263"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id265"/>
<target ref="id255"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id266"/>
<target ref="id265"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id267"/>
<target ref="id266"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id267"/>
<target ref="id261"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id268"/>
<target ref="id267"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id269"/>
<target ref="id268"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process15</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id270" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id271" x="-2560" y="-200">
<urgent/>
</location>
<location id="id272" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id273" x="-1928" y="-200">
<urgent/>
</location>
<location id="id274" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id275" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id276" x="-2560" y="-288">
<urgent/>
</location>
<location id="id277" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id278" x="-2336" y="-40">
<urgent/>
</location>
<location id="id279" x="-2264" y="-360">
<urgent/>
</location>
<location id="id280" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id281" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id282" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id283" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id284" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id285" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id286" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id287" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id274"/>
<transition>
<source ref="id270"/>
<target ref="id275"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id271"/>
<target ref="id272"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id271"/>
<target ref="id276"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id274"/>
<target ref="id276"/>
</transition>
<transition>
<source ref="id275"/>
<target ref="id271"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id276"/>
<target ref="id287"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id285"/>
<target ref="id285"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id281"/>
<target ref="id278"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id279"/>
<target ref="id272"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id279"/>
<target ref="id287"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id281"/>
<target ref="id281"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id273"/>
<target ref="id282"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id280"/>
<target ref="id270"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id273"/>
<target ref="id280"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id283"/>
<target ref="id283"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id278"/>
<target ref="id277"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id278"/>
<target ref="id275"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id282"/>
<target ref="id281"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id283"/>
<target ref="id273"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id284"/>
<target ref="id283"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id285"/>
<target ref="id284"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id285"/>
<target ref="id279"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id286"/>
<target ref="id285"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id287"/>
<target ref="id286"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process16</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id288" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id289" x="-2560" y="-200">
<urgent/>
</location>
<location id="id290" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id291" x="-1928" y="-200">
<urgent/>
</location>
<location id="id292" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id293" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id294" x="-2560" y="-288">
<urgent/>
</location>
<location id="id295" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id296" x="-2336" y="-40">
<urgent/>
</location>
<location id="id297" x="-2264" y="-360">
<urgent/>
</location>
<location id="id298" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id299" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id300" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id301" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id302" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id303" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id304" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id305" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id292"/>
<transition>
<source ref="id288"/>
<target ref="id293"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id289"/>
<target ref="id290"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id289"/>
<target ref="id294"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id292"/>
<target ref="id294"/>
</transition>
<transition>
<source ref="id293"/>
<target ref="id289"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id294"/>
<target ref="id305"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id303"/>
<target ref="id303"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id299"/>
<target ref="id296"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id297"/>
<target ref="id290"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id297"/>
<target ref="id305"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id299"/>
<target ref="id299"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id291"/>
<target ref="id300"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id298"/>
<target ref="id288"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id291"/>
<target ref="id298"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id301"/>
<target ref="id301"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id296"/>
<target ref="id295"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id296"/>
<target ref="id293"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id300"/>
<target ref="id299"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id301"/>
<target ref="id291"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id302"/>
<target ref="id301"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id303"/>
<target ref="id302"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id303"/>
<target ref="id297"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id304"/>
<target ref="id303"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id305"/>
<target ref="id304"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process17</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id306" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id307" x="-2560" y="-200">
<urgent/>
</location>
<location id="id308" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id309" x="-1928" y="-200">
<urgent/>
</location>
<location id="id310" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id311" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id312" x="-2560" y="-288">
<urgent/>
</location>
<location id="id313" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id314" x="-2336" y="-40">
<urgent/>
</location>
<location id="id315" x="-2264" y="-360">
<urgent/>
</location>
<location id="id316" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id317" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id318" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id319" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id320" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id321" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id322" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id323" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id310"/>
<transition>
<source ref="id306"/>
<target ref="id311"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id307"/>
<target ref="id308"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id307"/>
<target ref="id312"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id310"/>
<target ref="id312"/>
</transition>
<transition>
<source ref="id311"/>
<target ref="id307"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id312"/>
<target ref="id323"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id321"/>
<target ref="id321"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id317"/>
<target ref="id314"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id315"/>
<target ref="id308"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id315"/>
<target ref="id323"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id317"/>
<target ref="id317"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id309"/>
<target ref="id318"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id316"/>
<target ref="id306"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id309"/>
<target ref="id316"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id319"/>
<target ref="id319"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id314"/>
<target ref="id313"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id314"/>
<target ref="id311"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id318"/>
<target ref="id317"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id319"/>
<target ref="id309"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id320"/>
<target ref="id319"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id321"/>
<target ref="id320"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id321"/>
<target ref="id315"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id322"/>
<target ref="id321"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id323"/>
<target ref="id322"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process18</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id324" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id325" x="-2560" y="-200">
<urgent/>
</location>
<location id="id326" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id327" x="-1928" y="-200">
<urgent/>
</location>
<location id="id328" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id329" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id330" x="-2560" y="-288">
<urgent/>
</location>
<location id="id331" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id332" x="-2336" y="-40">
<urgent/>
</location>
<location id="id333" x="-2264" y="-360">
<urgent/>
</location>
<location id="id334" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id335" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id336" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id337" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id338" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id339" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id340" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id341" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id328"/>
<transition>
<source ref="id324"/>
<target ref="id329"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id325"/>
<target ref="id326"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id325"/>
<target ref="id330"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id328"/>
<target ref="id330"/>
</transition>
<transition>
<source ref="id329"/>
<target ref="id325"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id330"/>
<target ref="id341"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id339"/>
<target ref="id339"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id335"/>
<target ref="id332"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id333"/>
<target ref="id326"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id333"/>
<target ref="id341"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id335"/>
<target ref="id335"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id327"/>
<target ref="id336"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id334"/>
<target ref="id324"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id327"/>
<target ref="id334"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id337"/>
<target ref="id337"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id332"/>
<target ref="id331"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id332"/>
<target ref="id329"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id336"/>
<target ref="id335"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id337"/>
<target ref="id327"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id338"/>
<target ref="id337"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id339"/>
<target ref="id338"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id339"/>
<target ref="id333"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id340"/>
<target ref="id339"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id341"/>
<target ref="id340"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process19</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id342" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id343" x="-2560" y="-200">
<urgent/>
</location>
<location id="id344" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id345" x="-1928" y="-200">
<urgent/>
</location>
<location id="id346" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id347" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id348" x="-2560" y="-288">
<urgent/>
</location>
<location id="id349" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id350" x="-2336" y="-40">
<urgent/>
</location>
<location id="id351" x="-2264" y="-360">
<urgent/>
</location>
<location id="id352" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id353" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id354" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id355" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id356" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id357" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id358" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id359" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id346"/>
<transition>
<source ref="id342"/>
<target ref="id347"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id343"/>
<target ref="id344"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id343"/>
<target ref="id348"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id346"/>
<target ref="id348"/>
</transition>
<transition>
<source ref="id347"/>
<target ref="id343"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id348"/>
<target ref="id359"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id357"/>
<target ref="id357"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id353"/>
<target ref="id350"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id351"/>
<target ref="id344"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id351"/>
<target ref="id359"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id353"/>
<target ref="id353"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id345"/>
<target ref="id354"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id352"/>
<target ref="id342"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id345"/>
<target ref="id352"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id355"/>
<target ref="id355"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id350"/>
<target ref="id349"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id350"/>
<target ref="id347"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id354"/>
<target ref="id353"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id355"/>
<target ref="id345"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id356"/>
<target ref="id355"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id357"/>
<target ref="id356"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id357"/>
<target ref="id351"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id358"/>
<target ref="id357"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id359"/>
<target ref="id358"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process20</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id360" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id361" x="-2560" y="-200">
<urgent/>
</location>
<location id="id362" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id363" x="-1928" y="-200">
<urgent/>
</location>
<location id="id364" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id365" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id366" x="-2560" y="-288">
<urgent/>
</location>
<location id="id367" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id368" x="-2336" y="-40">
<urgent/>
</location>
<location id="id369" x="-2264" y="-360">
<urgent/>
</location>
<location id="id370" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id371" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id372" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id373" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id374" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id375" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id376" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id377" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id364"/>
<transition>
<source ref="id360"/>
<target ref="id365"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id361"/>
<target ref="id362"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id361"/>
<target ref="id366"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id364"/>
<target ref="id366"/>
</transition>
<transition>
<source ref="id365"/>
<target ref="id361"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id366"/>
<target ref="id377"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id375"/>
<target ref="id375"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id371"/>
<target ref="id368"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id369"/>
<target ref="id362"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id369"/>
<target ref="id377"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id371"/>
<target ref="id371"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id363"/>
<target ref="id372"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id370"/>
<target ref="id360"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id363"/>
<target ref="id370"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id373"/>
<target ref="id373"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id368"/>
<target ref="id367"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id368"/>
<target ref="id365"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id372"/>
<target ref="id371"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id373"/>
<target ref="id363"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id374"/>
<target ref="id373"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id375"/>
<target ref="id374"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id375"/>
<target ref="id369"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id376"/>
<target ref="id375"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id377"/>
<target ref="id376"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process21</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id378" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id379" x="-2560" y="-200">
<urgent/>
</location>
<location id="id380" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id381" x="-1928" y="-200">
<urgent/>
</location>
<location id="id382" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id383" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id384" x="-2560" y="-288">
<urgent/>
</location>
<location id="id385" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id386" x="-2336" y="-40">
<urgent/>
</location>
<location id="id387" x="-2264" y="-360">
<urgent/>
</location>
<location id="id388" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id389" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id390" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id391" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id392" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id393" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id394" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id395" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id382"/>
<transition>
<source ref="id378"/>
<target ref="id383"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id379"/>
<target ref="id380"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id379"/>
<target ref="id384"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id382"/>
<target ref="id384"/>
</transition>
<transition>
<source ref="id383"/>
<target ref="id379"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id384"/>
<target ref="id395"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id393"/>
<target ref="id393"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id389"/>
<target ref="id386"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id387"/>
<target ref="id380"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id387"/>
<target ref="id395"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id389"/>
<target ref="id389"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id381"/>
<target ref="id390"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id388"/>
<target ref="id378"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id381"/>
<target ref="id388"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id391"/>
<target ref="id391"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id386"/>
<target ref="id385"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id386"/>
<target ref="id383"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id390"/>
<target ref="id389"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id391"/>
<target ref="id381"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id392"/>
<target ref="id391"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id393"/>
<target ref="id392"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id393"/>
<target ref="id387"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id394"/>
<target ref="id393"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id395"/>
<target ref="id394"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process22</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id396" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id397" x="-2560" y="-200">
<urgent/>
</location>
<location id="id398" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id399" x="-1928" y="-200">
<urgent/>
</location>
<location id="id400" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id401" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id402" x="-2560" y="-288">
<urgent/>
</location>
<location id="id403" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id404" x="-2336" y="-40">
<urgent/>
</location>
<location id="id405" x="-2264" y="-360">
<urgent/>
</location>
<location id="id406" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id407" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id408" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id409" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id410" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id411" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id412" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id413" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id400"/>
<transition>
<source ref="id396"/>
<target ref="id401"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id397"/>
<target ref="id398"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id397"/>
<target ref="id402"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id400"/>
<target ref="id402"/>
</transition>
<transition>
<source ref="id401"/>
<target ref="id397"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id402"/>
<target ref="id413"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id411"/>
<target ref="id411"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id407"/>
<target ref="id404"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id405"/>
<target ref="id398"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id405"/>
<target ref="id413"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id407"/>
<target ref="id407"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id399"/>
<target ref="id408"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id406"/>
<target ref="id396"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id399"/>
<target ref="id406"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id409"/>
<target ref="id409"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id404"/>
<target ref="id403"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id404"/>
<target ref="id401"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id408"/>
<target ref="id407"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id409"/>
<target ref="id399"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id410"/>
<target ref="id409"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id411"/>
<target ref="id410"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id411"/>
<target ref="id405"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id412"/>
<target ref="id411"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id413"/>
<target ref="id412"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process23</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id414" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id415" x="-2560" y="-200">
<urgent/>
</location>
<location id="id416" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id417" x="-1928" y="-200">
<urgent/>
</location>
<location id="id418" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id419" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id420" x="-2560" y="-288">
<urgent/>
</location>
<location id="id421" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id422" x="-2336" y="-40">
<urgent/>
</location>
<location id="id423" x="-2264" y="-360">
<urgent/>
</location>
<location id="id424" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id425" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id426" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id427" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id428" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id429" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id430" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id431" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id418"/>
<transition>
<source ref="id414"/>
<target ref="id419"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id415"/>
<target ref="id416"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id415"/>
<target ref="id420"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id418"/>
<target ref="id420"/>
</transition>
<transition>
<source ref="id419"/>
<target ref="id415"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id420"/>
<target ref="id431"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id429"/>
<target ref="id429"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id425"/>
<target ref="id422"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id423"/>
<target ref="id416"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id423"/>
<target ref="id431"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id425"/>
<target ref="id425"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id417"/>
<target ref="id426"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id424"/>
<target ref="id414"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id417"/>
<target ref="id424"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id427"/>
<target ref="id427"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id422"/>
<target ref="id421"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id422"/>
<target ref="id419"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id426"/>
<target ref="id425"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id427"/>
<target ref="id417"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id428"/>
<target ref="id427"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id429"/>
<target ref="id428"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id429"/>
<target ref="id423"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id430"/>
<target ref="id429"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id431"/>
<target ref="id430"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><template>
<name x="5" y="5">Process24</name>
<declaration>
int be;
int nb; 
int nt;
int nretries;
int backoff;
int waking_delay;
clock x;
bool cca_passed := false;
bool collision_occured := false;
</declaration>
<location id="id432" x="-2352" y="64">
<label kind="invariant" x="-2346" y="34">x&lt;=ACK_Time</label>
</location>
<location id="id433" x="-2560" y="-200">
<urgent/>
</location>
<location id="id434" x="-2264" y="-200">
<name x="-2264" y="-184">FAILURE</name>
</location>
<location id="id435" x="-1928" y="-200">
<urgent/>
</location>
<location id="id436" x="-2704" y="-288">
<label kind="invariant" x="-2712" y="-328">x&lt;=MaxWakingDelay</label>
</location>
<location id="id437" x="-2560" y="-40">
<label kind="invariant" x="-2544" y="-72">x&lt;=MinLIFS</label>
</location>
<location id="id438" x="-2560" y="-288">
<urgent/>
</location>
<location id="id439" x="-2336" y="-128">
<name x="-2416" y="-152">SUCCESS</name>
</location>
<location id="id440" x="-2336" y="-40">
<urgent/>
</location>
<location id="id441" x="-2264" y="-360">
<urgent/>
</location>
<location id="id442" x="-1928" y="64">
<label kind="invariant" x="-1920" y="32">x&lt;=TurnAround</label>
</location>
<location id="id443" x="-2160" y="-40">
<label kind="invariant" x="-2152" y="-72">x&lt;=ACK_time</label>
</location>
<location id="id444" x="-2160" y="-200">
<label kind="invariant" x="-2232" y="-232">x&lt;=aTurnaroundTime</label>
</location>
<location id="id445" x="-1928" y="-360">
<name x="-2064" y="-392">TRANSMIT_DATA</name>
<label kind="invariant" x="-2064" y="-376">x&lt;=FrameLength</label>
</location>
<location id="id446" x="-1928" y="-488">
<name x="-2032" y="-512">VULNERABLE</name>
<label kind="invariant" x="-1912" y="-512">x&lt;=TurnAround</label>
</location>
<location id="id447" x="-2264" y="-488">
<name x="-2312" y="-512">CCA</name>
<label kind="invariant" x="-2256" y="-480">x&lt;=CCA</label>
</location>
<location id="id448" x="-2560" y="-488">
<name x="-2680" y="-512">WAIT_BACKOFF</name>
<label kind="invariant" x="-2744" y="-488">x&lt;=backoff*UnitBackoff</label>
</location>
<location id="id449" x="-2560" y="-360">
<urgent/>
</location>
<init ref="id436"/>
<transition>
<source ref="id432"/>
<target ref="id437"/>
<label kind="guard" x="-2488" y="40">x==ACK_Time</label>
<label kind="assignment" x="-2542" y="64">x:=0</label>
<nail x="-2560" y="64"/>
</transition>
<transition>
<source ref="id433"/>
<target ref="id434"/>
<label kind="guard" x="-2536" y="-200">nretries == (MaxFrameRetries-1)</label>
<nail x="-2360" y="-200"/>
</transition>
<transition>
<source ref="id433"/>
<target ref="id438"/>
<label kind="guard" x="-2552" y="-240">nretries &lt; (MaxFrameRetries-1)</label>
<label kind="assignment" x="-2552" y="-224">nretries = nretries + 1</label>
</transition>
<transition>
<source ref="id436"/>
<target ref="id438"/>
</transition>
<transition>
<source ref="id437"/>
<target ref="id433"/>
<label kind="guard" x="-2552" y="-176">x==MinLIFS</label>
</transition>
<transition>
<source ref="id438"/>
<target ref="id449"/>
<label kind="assignment" x="-2552" y="-336">be:=macMinBE, nb:=0</label>
</transition>
<transition>
<source ref="id447"/>
<target ref="id447"/>
<label kind="synchronisation" x="-2304" y="-592">busy?</label>
<label kind="assignment" x="-2304" y="-576">cca_passed:=false</label>
<nail x="-2304" y="-552"/>
<nail x="-2216" y="-552"/>
</transition>
<transition>
<source ref="id443"/>
<target ref="id440"/>
<label kind="guard" x="-2304" y="-72">x==ACK</label>
<label kind="assignment" x="-2304" y="-56">nt:=nt-1</label>
</transition>
<transition>
<source ref="id441"/>
<target ref="id434"/>
<label kind="guard" x="-2256" y="-328">nb == MaxNB</label>
</transition>
<transition>
<source ref="id441"/>
<target ref="id449"/>
<label kind="guard" x="-2544" y="-400">nb &lt; MaxNB</label>
<label kind="assignment" x="-2544" y="-384">be:= be+1 &gt; MaxBE ? MaxBE: be+1</label>
</transition>
<transition>
<source ref="id443"/>
<target ref="id443"/>
<label kind="synchronisation" x="-2144" y="-32">busy?</label>
<label kind="assignment" x="-2144" y="-16">collision_occured:=true</label>
<nail x="-2184" y="8"/>
<nail x="-2136" y="8"/>
<nail x="-2152" y="-16"/>
</transition>
<transition>
<source ref="id435"/>
<target ref="id444"/>
<label kind="guard" x="-2080" y="-224">collision_occured == false</label>
</transition>
<transition>
<source ref="id442"/>
<target ref="id432"/>
<label kind="guard" x="-2056" y="32">x == TurnAround</label>
<label kind="assignment" x="-2056" y="48">x:=0</label>
</transition>
<transition>
<source ref="id435"/>
<target ref="id442"/>
<label kind="guard" x="-1920" y="-176">collision_occured == true</label>
<nail x="-1928" y="-64"/>
</transition>
<transition>
<source ref="id445"/>
<target ref="id445"/>
<label kind="synchronisation" x="-1864" y="-384">busy?</label>
<label kind="assignment" x="-1864" y="-368">collision_occured:=true</label>
<nail x="-1872" y="-392"/>
<nail x="-1872" y="-320"/>
</transition>
<transition>
<source ref="id440"/>
<target ref="id439"/>
<label kind="guard" x="-2328" y="-96">collision_occured == false</label>
<nail x="-2336" y="-72"/>
</transition>
<transition>
<source ref="id440"/>
<target ref="id437"/>
<label kind="guard" x="-2480" y="-32">collision_occured == true</label>
<label kind="assignment" x="-2408" y="-64">x:=0</label>
</transition>
<transition>
<source ref="id444"/>
<target ref="id443"/>
<label kind="guard" x="-2152" y="-176">x==TurnAround</label>
<label kind="synchronisation" x="-2152" y="-120">busy!</label>
<label kind="assignment" x="-2152" y="-160">collision_occured:=nt&gt;0 ? true : false,
nt:=nt+1,
x:=0</label>
</transition>
<transition>
<source ref="id445"/>
<target ref="id435"/>
<label kind="guard" x="-1920" y="-312">x==FrameLength</label>
<label kind="assignment" x="-1920" y="-296">x:=0,
nt:=nt-1</label>
</transition>
<transition>
<source ref="id446"/>
<target ref="id445"/>
<label kind="guard" x="-1920" y="-472">x==TurnAround</label>
<label kind="synchronisation" x="-2184" y="-520">busy!</label>
<label kind="assignment" x="-1920" y="-456">x:=0,
collision_occured:= nt&gt;0 ? true : false,
nt:=nt+1</label>
</transition>
<transition>
<source ref="id447"/>
<target ref="id446"/>
<label kind="guard" x="-2184" y="-536">x==CCA_duration &amp;&amp; cca_passed == true</label>
<label kind="assignment" x="-2184" y="-504">x:=0</label>
</transition>
<transition>
<source ref="id447"/>
<target ref="id441"/>
<label kind="guard" x="-2264" y="-448">x == CCA_duration &amp;&amp; cca_passed == false</label>
<label kind="assignment" x="-2264" y="-432">nb := nb+1</label>
</transition>
<transition>
<source ref="id448"/>
<target ref="id447"/>
<label kind="guard" x="-2512" y="-544">x==backoff*UnitBackoff</label>
<label kind="assignment" x="-2512" y="-528">cca_passed:= nt==0 ? true : false,
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 0 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 1 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 2 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 3 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 4 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 5 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 6 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 7 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 8 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 9 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 10 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 11 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 12 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 13 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 14 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 15 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 16 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 17 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 18 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 19 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 20 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 21 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 22 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 23 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 24 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 25 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 26 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 27 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 28 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 29 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 30 % (2^be),
x:=0</label>
</transition>
<transition>
<source ref="id449"/>
<target ref="id448"/>
<label kind="assignment" x="-2552" y="-448">backoff := 31 % (2^be),
x:=0</label>
</transition>
</template><system>system Process0,Process1,Process2,Process3,Process4,Process5,Process6,Process7,Process8,Process9,Process10,Process11,Process12,Process13,Process14,Process15,Process16,Process17,Process18,Process19,Process20,Process21,Process22,Process23,Process24;</system><queries>
<query>
<formula>Pr[&lt;=100](&lt;&gt;sum(i:id_t) Process0(i).SUCCESS)</formula>
<comment></comment>
</query>
</queries>
</nta>